@model GridCoreSmart<LMayorAcumuladoDiaDto>

<div class="row">
    <div class="col-md-5">
        <div class="table-responsive">
            <table id="tbMayorDiario" class="table table-sm mb-0 table-hover">
                <thead class="table-dark">
                    <tr>
                        <th scope="col">Fecha</th>
                        <th scope="col" class="text-end">Debe</th>
                        <th scope="col" class="text-end">Haber</th>
                        <th scope="col" class="text-end">Saldo</th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model.ListaDatos == null || Model.ListaDatos.Count == 0)
                    {
                        <tr>
                            <td colspan="4" class="text-center">No se han encontrado movimientos.</td>
                        </tr>
                    }
                    else
                    {
                        // Saldo anterior
                        <tr class="saldo-anterior">
                            <td>Saldo Anterior</td>
                            <td class="text-end"></td>
                            <td class="text-end"></td>
                            <td class="text-end">@Model.FormatearDato(Model.ListaDatos.FirstOrDefault()?.saldo_anterior ?? 0, FormatDato.Monto)</td>
                        </tr>

                        foreach (var item in Model.ListaDatos)
                        {
                            <tr data-fecha="@item.fecha_str">
                                <td>@item.fecha_str</td>
                                <td class="text-end">@Model.FormatearDato(item.total_debe, FormatDato.Monto)</td>
                                <td class="text-end">@Model.FormatearDato(item.total_haber, FormatDato.Monto)</td>
                                <td class="text-end">@Model.FormatearDato(item.saldo_final, FormatDato.Monto)</td>
                            </tr>
                        }

                        // Totales
                        <tr class="table-info">
                            <td class="fw-bold">Totales</td>
                            <td class="text-end fw-bold">@Model.FormatearDato(Model.ListaDatos.Sum(x => x.total_debe), FormatDato.Monto)</td>
                            <td class="text-end fw-bold">@Model.FormatearDato(Model.ListaDatos.Sum(x => x.total_haber), FormatDato.Monto)</td>
                            <td></td>
                        </tr>

                        // Saldo actual
                        <tr class="saldo-actual">
                            <td>Saldo Actual</td>
                            <td class="text-end"></td>
                            <td class="text-end"></td>
                            <td class="text-end">@Model.FormatearDato(Model.ListaDatos.LastOrDefault()?.saldo_final ?? 0, FormatDato.Monto)</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
        <div class="mt-2">
            <p class="small text-muted">
                <i class="bx bx-info-circle"></i>
                Haga doble clic en una fecha para ver el detalle del día.
            </p>
        </div>
    </div>
    <div class="col-md-7">
        <div id="detalleDia">
            <div class="alert alert-info">
                <i class="bx bx-info-circle"></i>
                Seleccione una fecha para ver el detalle del día.
            </div>
        </div>
    </div>
</div>

<style>
    /* Estilo para filas seleccionadas con click simple */
    #tbMayorDiario tbody tr.selected-simple {
        background-color: #f0f0f0 !important;
    }

    /* Estilo para filas seleccionadas con doble click (estilo bordo) */
    #tbMayorDiario tbody tr.selectedEdit-row {
        background-color: firebrick !important;
        color: white !important;
        font-weight: bold;
    }

    /* Estilos para saldo anterior y actual */
    .saldo-anterior, .saldo-actual {
        background-color: #f8f9fa !important;
        font-weight: bold;
    }

    .saldo-actual {
        background-color: #e9ecef !important;
    }
</style>
