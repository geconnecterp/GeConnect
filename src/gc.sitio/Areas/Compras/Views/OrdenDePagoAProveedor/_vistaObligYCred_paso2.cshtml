@model CargarObligacionesOCreditosPaso2Model
@using static gc.infraestructura.Helpers.GridHelper
@{
	var tieneMP = Model.TieneMediosDePagos;
	var esPagoAnt = Model.EsPagoAnticipado;
	var estiloFieldSetRefDePago = string.Empty;
	var estiloDivSeccionPagos = string.Empty;
	var estiloDivObligacionesParaAgregar = string.Empty;
	var estilocontainerListaObligacionesParaAgregar = string.Empty;
	if (esPagoAnt)
	{
		if (tieneMP)
		{
			estiloFieldSetRefDePago = "height: 190px; width: 100%;margin-top: 15px;";
			estiloDivSeccionPagos = "height: 230px;padding-left: 15px;";
			estiloDivObligacionesParaAgregar = "height: 200px;";
			estilocontainerListaObligacionesParaAgregar = "";
		}
		else
		{
			estiloFieldSetRefDePago = "height: 60px;width: 100%;margin-top: 15px;";
			estiloDivSeccionPagos = "height: 100px;padding-left: 15px;";
			estiloDivObligacionesParaAgregar = "height: 320px;";
			estilocontainerListaObligacionesParaAgregar = "max-height: 300px;";
		}
	}
	else
	{
		if (tieneMP)
		{
			estiloFieldSetRefDePago = "height: 225px; width: 100%;";
			estiloDivSeccionPagos = "height: 230px;padding-left: 15px;";
			estiloDivObligacionesParaAgregar = "height: 200px;";
			estilocontainerListaObligacionesParaAgregar = "";
		}
		else
		{
			estiloFieldSetRefDePago = "height: 60px;width: 100%;";
			estiloDivSeccionPagos = "height: 90px;padding-left: 15px;";
			estiloDivObligacionesParaAgregar = "height: 360px;";
			estilocontainerListaObligacionesParaAgregar = "max-height: 340px;";
		}
	}
}
<style>
	fieldset {
	margin: 8px;
	border: 1px solid silver;
	padding: 8px;
	border-radius: 4px;
	max-width: 100%;
	margin-top: 8px;
	margin-left: 0px;
	margin-right: 0px;
	margin-bottom: 0px;
	height: 500px;
	}

	legend {
	padding: 2px;
	margin-top: -22px;
	background: #f3f5f7 !important;
	width: 25%;
	text-align: center;
	font-size: small;
	}
</style>
<div class="row mt-2">
	<div class="col-md-5">
		<div class="input-group input-group-sm mt-1" id="divProveedorSeleccionado">
			<span class="input-group-text fixed-lbl-for-abm-70">Cuenta: </span>
			<input type="text" id="CtaID" class="form-control" style="max-width: 100px;text-align: right;" disabled />
			<input type="text" id="CtaDesc" class="form-control" disabled />
		</div>
	</div>
	<div class="col-md-7">
		<div class="input-group input-group-sm mt-1">
			<span class="input-group-text fixed-lbl-for-abm-100" title="Obligaciones a Cancelar">Obl. a Cancelar: </span>
			<input type="text" id="txtObligACancelar" class="form-control align-right" style="background-color: darkred; color: white;" value="0" disabled />
			<span class="input-group-text fixed-lbl-for-abm-150" title="Créditos y Valores Imputados">Cred. y Val. Imputados: </span>
			<input type="text" id="txtCredYValImputados" class="form-control align-right" style="background-color: dodgerblue; color: white;" value="0" disabled />
			<span class="input-group-text fixed-lbl-for-abm-100">Diferencia: </span>
			<input type="text" id="txtDiferencias" class="form-control align-right" style="background-color: forestgreen; color: white;" value="0" disabled />
		</div>
	</div>
</div>
<div class="row mt-2">
	<div class="col-6" style="height: 500px;">
		<fieldset>
			<legend>Obligaciones</legend>
			<div class="row" id="divObligacionesParaAgregar" style="@estiloDivObligacionesParaAgregar">
				<div class="table-responsive table-wrapper-200" id="containerListaObligacionesParaAgregar_Paso2" style="@estilocontainerListaObligacionesParaAgregar">
					<table class="table table-bordered table-hover" id="tbListaObligacionesParaAgregar_Paso2">
						<thead style="background: darkred;">
							<tr>
								<th style="width:50%;" class="col-header-small align-center tiny-row">Comprobante</th>
								<th style="width:5%;" class="col-header-small align-center tiny-row">Cuota</th>
								<th style="width:15%;" class="col-header-small align-center tiny-row">Vencimiento</th>
								<th style="width:15%;" class="col-header-small align-center tiny-row">Importe</th>
								<th style="width:15%;" class="col-header-small align-center tiny-row">Imputado</th>
								<th style="width:0%;display:none;" class="col-header-small align-center tiny-row">dia_movi</th>
								<th style="width:0%;display:none;" class="col-header-small align-center tiny-row">cm_compte</th>
								<th style="width:0%;display:none;" class="col-header-small align-center tiny-row">tco_id</th>
								<th style="width:0%;display:none;" class="col-header-small align-center tiny-row">cta_id</th>
							</tr>
						</thead>
						<tbody>
							@if (Model.GrillaObligacionesNuevas != null && Model.GrillaObligacionesNuevas.ListaDatos != null && Model.GrillaObligacionesNuevas.ListaDatos.Count > 0)
							{
								@foreach (var item in Model.GrillaObligacionesNuevas.ListaDatos)
								{
									<tr onclick="selectReg(this, 'tbListaObligacionesParaAgregar_Paso2')" ondblclick="selectRegDbl(this, 'tbListaObligacionesParaAgregar_Paso2')">
										<td class="@Model.GrillaObligacionesNuevas.ObtenerClase(item.concepto) cell-fit-content">@Model.GrillaObligacionesNuevas.FormatearDato(item.concepto, FormatDato.Ninguno)</td>
										<td class="@Model.GrillaObligacionesNuevas.ObtenerClase(item.cm_compte_cuota) cell-fit-content">@Model.GrillaObligacionesNuevas.FormatearDato(item.cm_compte_cuota, FormatDato.Ninguno)</td>
										<td class="@Model.GrillaObligacionesNuevas.ObtenerClase(item.cv_fecha_vto) cell-fit-content">@Model.GrillaObligacionesNuevas.FormatearDato(item.cv_fecha_vto, FormatDato.Fecha)</td>
										<td class="@Model.GrillaObligacionesNuevas.ObtenerClase(item.cv_importe) cell-fit-content">@Model.GrillaObligacionesNuevas.FormatearDato(item.cv_importe, FormatDato.Monto)</td>
										<td class="@Model.GrillaObligacionesNuevas.ObtenerClase(item.cv_imputado) cell-fit-content">@Model.GrillaObligacionesNuevas.FormatearDato(item.cv_imputado, FormatDato.Monto)</td>
										<td style="display:none;">@item.dia_movi</td>
										<td style="display:none;">@item.cm_compte</td>
										<td style="display:none;">@item.tco_id</td>
										<td style="display:none;">@item.cta_id</td>
									</tr>
								}
							}
						</tbody>
					</table>
				</div>
			</div>
			<div class="row justify-content-sm-center mb-1">
				<div class="col-md-2">
					<div class="d-flex justify-content-sm-center">
						<button id="btnAnterior2" class="btn btn-success btn-sm mt-1 me-1" type="button" title="Anterior">
							<i class="bx bx-arrow-to-left bx-xs"></i>
						</button>
						<button id="btnConfirmar2" class="btn btn-success btn-sm mt-1 me-1" type="button" title="Confirmar">
							<i class="bx bx-check-circle"></i>
						</button>
						<button id="btnAbmCancelar" class="btn btn-danger btn-sm mt-1 me-1" type="button" title="Cancelar" onclick="btnAbmCancelar_click();">
							<i class="bx bx-x-circle bx-xs"></i>
						</button>
					</div>
				</div>
			</div>
			<div class="row" id="divSeccionPagos" style="@estiloDivSeccionPagos">
				<div style="padding-left: 0px;">
					@if (Model.EsPagoAnticipado)
					{
						<div class="row mt-1 mb-1">
							<div class="input-group input-group-sm" style="padding-left:15px;padding-right: 12px;">
								<span class="input-group-text fixed-lbl-for-abm-100">Pago Anticipado:</span>
								<input type="text" id="txtPagoAnticipado" class="form-control activable inputEditable" />
							</div>
						</div>
						<fieldset style="@estiloFieldSetRefDePago">
							<legend>Referencias de Pago</legend>
							<div class="row mt-1 mb-1">
								<div class="input-group input-group-sm">
									<span class="input-group-text fixed-lbl-for-abm-100">Obs. de Pago:</span>
									<input type="text" asp-for="CuentaObs" class="form-control activable inputEditable" />
								</div>
							</div>
							@if (Model.TieneMediosDePagos)
							{
								<div class="row" id="divSeccionPagosGrilla" style="height: 150px;">
									<div class="col-12 table-responsive table-wrapper-125" id="containerSeccionPagosGrilla_Paso2" style="padding-right: 0px;">
										<table class="table table-bordered table-hover" id="tbListaMedioDePago_Paso2">
											<thead class="table-dark">
												<tr>
													<th style="width:100%;" class="col-header-small align-center tiny-row">Medios de Pagos</th>
													<th style="width:0%;display:none;" class="col-header-small align-center tiny-row">fp_id</th>
												</tr>
											</thead>
											<tbody>
												@if (Model.GrillaMedioDePago != null && Model.GrillaMedioDePago.ListaDatos != null && Model.GrillaMedioDePago.ListaDatos.Count > 0)
												{
													@foreach (var item in Model.GrillaMedioDePago.ListaDatos)
													{
														<tr onclick="selectReg(this, 'tbListaMedioDePago_Paso2')" ondblclick="selectRegDbl(this, 'tbListaMedioDePago_Paso2')">
															<td class="@Model.GrillaMedioDePago.ObtenerClase(item.fp_lista) cell-fit-content">@Model.GrillaMedioDePago.FormatearDato(item.fp_lista, FormatDato.Ninguno)</td>
															<td style="display:none;">@item.fp_id</td>
														</tr>
													}
												}
											</tbody>
										</table>
									</div>
								</div>
							}
						</fieldset>
					}
					else
					{
						<fieldset style="@estiloFieldSetRefDePago">
							<legend>Referencias de Pago</legend>
							<div class="row mt-1 mb-1">
								<div class="input-group input-group-sm">
									<span class="input-group-text fixed-lbl-for-abm-100">Obs. de Pago:</span>
									<input type="text" asp-for="CuentaObs" class="form-control activable inputEditable" />
								</div>
							</div>
							@if (Model.TieneMediosDePagos)
							{
								<div class="row" id="divSeccionPagosGrilla" style="height: 150px;">
									<div class="col-12 table-responsive table-wrapper-170" id="containerSeccionPagosGrilla_Paso2" style="padding-right: 0px;">
										<table class="table table-bordered table-hover" id="tbListaMedioDePago_Paso2">
											<thead class="table-dark">
												<tr>
													<th style="width:100%;" class="col-header-small align-center tiny-row">Medios de Pagos</th>
													<th style="width:0%;display:none;" class="col-header-small align-center tiny-row">fp_id</th>
												</tr>
											</thead>
											<tbody>
												@if (Model.GrillaMedioDePago != null && Model.GrillaMedioDePago.ListaDatos != null && Model.GrillaMedioDePago.ListaDatos.Count > 0)
												{
													@foreach (var item in Model.GrillaMedioDePago.ListaDatos)
													{
														<tr onclick="selectReg(this, 'tbListaMedioDePago_Paso2')" ondblclick="selectRegDbl(this, 'tbListaMedioDePago_Paso2')">
															<td class="@Model.GrillaMedioDePago.ObtenerClase(item.fp_lista) cell-fit-content">@Model.GrillaMedioDePago.FormatearDato(item.fp_lista, FormatDato.Ninguno)</td>
															<td style="display:none;">@item.fp_id</td>
														</tr>
													}
												}
											</tbody>
										</table>
									</div>
								</div>
							}
						</fieldset>
					}
				</div>
			</div>
		</fieldset>
	</div>
	<div class="col-6" style="height: 500px;">
		<fieldset>
			<legend>Créditos y Valores</legend>
			<div class="row" id="divCreditosParaAgregar" style="height: 200px;">
				<div class="table-responsive table-wrapper-200" id="containerListaCreditosParaAgregar_Paso2">
					<table class="table table-bordered table-hover" id="tbListaCreditosParaAgregar_Paso2">
						<thead style="background: dodgerblue;">
							<tr>
								<th style="width:50%;" class="col-header-small align-center tiny-row">Comprobante</th>
								<th style="width:5%;" class="col-header-small align-center tiny-row">Cuota</th>
								<th style="width:15%;" class="col-header-small align-center tiny-row">Vencimiento</th>
								<th style="width:15%;" class="col-header-small align-center tiny-row">Importe</th>
								<th style="width:15%;" class="col-header-small align-center tiny-row">Imputado</th>
								<th style="width:0%;display:none;" class="col-header-small align-center tiny-row">dia_movi</th>
								<th style="width:0%;display:none;" class="col-header-small align-center tiny-row">cm_compte</th>
								<th style="width:0%;display:none;" class="col-header-small align-center tiny-row">tco_id</th>
								<th style="width:0%;display:none;" class="col-header-small align-center tiny-row">cta_id</th>
							</tr>
						</thead>
						<tbody>
							@if (Model.GrillaCreditosNueva != null && Model.GrillaCreditosNueva.ListaDatos != null && Model.GrillaCreditosNueva.ListaDatos.Count > 0)
							{
								@foreach (var item in Model.GrillaCreditosNueva.ListaDatos)
								{
									<tr onclick="selectReg(this, 'tbListaCreditosParaAgregar_Paso2')" ondblclick="selectRegDbl(this, 'tbListaCreditosParaAgregar_Paso2')">
										<td class="@Model.GrillaCreditosNueva.ObtenerClase(item.concepto) cell-fit-content">@Model.GrillaCreditosNueva.FormatearDato(item.concepto, FormatDato.Ninguno)</td>
										<td class="@Model.GrillaCreditosNueva.ObtenerClase(item.cm_compte_cuota) cell-fit-content">@Model.GrillaCreditosNueva.FormatearDato(item.cm_compte_cuota, FormatDato.Ninguno)</td>
										<td class="@Model.GrillaCreditosNueva.ObtenerClase(item.cv_fecha_vto) cell-fit-content">@Model.GrillaCreditosNueva.FormatearDato(item.cv_fecha_vto, FormatDato.Fecha)</td>
										<td class="@Model.GrillaCreditosNueva.ObtenerClase(item.cv_importe) cell-fit-content">@Model.GrillaCreditosNueva.FormatearDato(item.cv_importe, FormatDato.Monto)</td>
										<td class="@Model.GrillaCreditosNueva.ObtenerClase(item.cv_imputado) cell-fit-content">@Model.GrillaCreditosNueva.FormatearDato(item.cv_imputado, FormatDato.Monto)</td>
										<td style="display:none;">@item.dia_movi</td>
										<td style="display:none;">@item.cm_compte</td>
										<td style="display:none;">@item.tco_id</td>
										<td style="display:none;">@item.cta_id</td>
									</tr>
								}
							}
						</tbody>
					</table>
				</div>
			</div>
			<div class="row mt-2" id="divRetenciones">
				<div class="table-responsive table-wrapper-100" id="containerRetenciones_Paso2">
					<table class="table table-bordered table-hover" id="tbListaRetenciones_Paso2">
						<thead style="background: dodgerblue;">
							<tr>
								<th style="width:75%;" class="col-header-small align-center tiny-row">Retenciones</th>
								<th style="width:25%;" class="col-header-small align-center tiny-row">Importes</th>
							</tr>
						</thead>
						<tbody>
							@if (Model.GrillaRetenciones != null && Model.GrillaRetenciones.ListaDatos != null && Model.GrillaRetenciones.ListaDatos.Count > 0)
							{
								@foreach (var item in Model.GrillaRetenciones.ListaDatos)
								{
									<tr onclick="selectReg(this, 'tbListaRetenciones_Paso2')" ondblclick="selectRegDbl(this, 'tbListaRetenciones_Paso2')">
										<td class="@Model.GrillaRetenciones.ObtenerClase(item.concepto_retencion) cell-fit-content">@Model.GrillaRetenciones.FormatearDato(item.concepto_retencion, FormatDato.Ninguno)</td>
										<td class="@Model.GrillaRetenciones.ObtenerClase(item.retencion) cell-fit-content">@Model.GrillaRetenciones.FormatearDato(item.retencion, FormatDato.Monto)</td>
									</tr>
								}
							}
						</tbody>
					</table>
				</div>
			</div>
			<div class="row" id="divValores" style="height: 100px;">
				<div class="table-responsive table-wrapper-100" id="containerValores_Paso2">
					<table class="table table-bordered table-hover" id="tbListaValores_Paso2">
						<thead style="background: dodgerblue;">
							<tr>
								<th style="width:40%;" class="col-header-small align-center tiny-row">Cuenta Financiera</th>
								<th style="width:50%;" class="col-header-small align-center tiny-row">Valor</th>
								<th style="width:10%;" class="col-header-small align-center tiny-row">Importe</th>
								<th style="width:0%; display:none;">orden</th>
							</tr>
						</thead>
						<tbody>
							@if (Model.GrillaValores != null && Model.GrillaValores.ListaDatos != null && Model.GrillaValores.ListaDatos.Count > 0)
							{
								@foreach (var item in Model.GrillaValores.ListaDatos)
								{
									<tr onclick="selectReg(this, 'tbListaValores_Paso2')" ondblclick="selectRegDbl(this, 'tbListaValores_Paso2')">
										<td class="@Model.GrillaValores.ObtenerClase(item.ctaf_denominacion) cell-fit-content">@Model.GrillaValores.FormatearDato(item.ctaf_denominacion, FormatDato.Ninguno)</td>
										<td class="@Model.GrillaValores.ObtenerClase(item.concepto_valor) cell-fit-content">@Model.GrillaValores.FormatearDato(item.concepto_valor, FormatDato.Monto)</td>
										<td class="@Model.GrillaValores.ObtenerClase(item.op_importe) cell-fit-content">@Model.GrillaValores.FormatearDato(item.op_importe, FormatDato.Monto)</td>
										<td style="display:none;">@item.orden</td>
									</tr>
								}
							}
						</tbody>
					</table>
				</div>
			</div>
		</fieldset>
	</div>
</div>